
apache

sudo yum install httpd
sudo systemctl start httpd
sudo systemctl enable httpd
sudo systemctl status httpd

php

sudo yum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
sudo yum install -y https://rpms.remirepo.net/enterprise/remi-release-7.rpm
sudo yum -y install yum-utils
sudo yum-config-manager --disable 'remi-php*'
sudo yum-config-manager --enable remi-php80
sudo yum install php php-cli php-common
php -v
sudo vim /var/www/html/info.php
<?php

phpinfo();

?>
sudo systemctl restart httpd


mysql
sudo vi /etc/hosts
10.148.0.8      database
10.147.0.4      firewall
10.148.0.7      webserver
sudo yum --enablerepo=remi,epel install mysql-server 
sudo yum --enablerepo=remi,epel install mariadb-server
sudo service mariadb start 
/usr/bin/mysql_secure_installation
mysql -uroot -p 
CREATE USER 'admindb'@'%' IDENTIFIED BY 'admindb';
GRANT ALL PRIVILEGES ON *.* TO 'admindb'@'%';
FLUSH PRIVILEGES;

phpmyadmin

sudo yum --enablerepo=remi install phpmyadmin
sudo nano /etc/httpd/conf.d/phpMyAdmin.conf
Require all granted
sudo vi /etc/phpMyAdmin/config.inc.php
sudo setsebool -P httpd_can_network_connect_db on
sudo systemctl restart httpd.service


deploy

curl -sS https://getcomposer.org/installer | php
sudo mv composer.phar /usr/bin/composer
sudo chmod +x /usr/bin/composer
sudo yum -y install git
sudo cd /var/www/html/
mkdir bank2u
cd bank2u
sudo git clone https://github.com/beng3r/webapp-bank2u-laravel.git
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
sudo chown -R apache.apache /var/www/html/bank2u
sudo chmod -R 755 /var/www/html/bank2u 
sudo chmod -R 755 /var/www/html/bank2u/storage
sudo chcon -R -t httpd_sys_rw_content_t /var/www/html/bank2u/storage
sudo composer install
sudo vi .env 
sudo php artisan key:generate
php artisan migrate
sudo vi /etc/httpd/conf.d/bank2u.conf
<VirtualHost *:80>
       ServerName bank2u.com
       DocumentRoot /var/www/html/bank2u/public

       <Directory /var/www/html/bank2u>
             AllowOverride All
       </Directory>
</VirtualHost>
sudo service httpd restart 



https

sudo yum install mod_ssl
sudo mkdir /etc/ssl/private
sudo chmod 700 /etc/ssl/private
sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/apache-selfsigned.key -out /etc/ssl/certs/apache-selfsigned.crt
sudo openssl dhparam -out /etc/ssl/certs/dhparam.pem 2048
sudo vi /etc/httpd/conf.d/bank2u.conf
<VirtualHost *:80>
       ServerName bank2u.com
        Redirect "/" "https://bank2u.com/"
</VirtualHost>
<VirtualHost *:443>
    ServerName bank2u.com
    DocumentRoot /var/www/html/bank2u/public
    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/apache-selfsigned.crt
    SSLCertificateKeyFile /etc/ssl/private/apache-selfsigned.key
    <Directory /var/www/html/bank2u/public/>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>
sudo apachectl configtest
sudo systemctl restart httpd.service
<
<VirtualHost *:80> 
   DocumentRoot "/var/www/html/bank2u/public" 
   ServerName bank2u.com 
   ServerAlias bank2u.com 
      <Directory "/var/www/html/bank2u/public"> 
         Require all granted 
      </Directory> 
</VirtualHost> 

FIREWALL
sudo systemctl start nginx
sudo systemctl enable nginx
sudo systemctl status nginx

/etc/ssl/certs/apache-selfsigned.crt

-----BEGIN CERTIFICATE-----
MIIDwzCCAqugAwIBAgIJAIHYYhr0ub26MA0GCSqGSIb3DQEBCwUAMHgxCzAJBgNV
BAYTAk1ZMRUwEwYDVQQHDAxEZWZhdWx0IENpdHkxHDAaBgNVBAoME0RlZmF1bHQg
Q29tcGFueSBMdGQxEzARBgNVBAMMCmJhbmsydS5jb20xHzAdBgkqhkiG9w0BCQEW
EGFkbWluQGJhbmsydS5jb20wHhcNMjIwNjEwMTQwNjE2WhcNMjMwNjEwMTQwNjE2
WjB4MQswCQYDVQQGEwJNWTEVMBMGA1UEBwwMRGVmYXVsdCBDaXR5MRwwGgYDVQQK
DBNEZWZhdWx0IENvbXBhbnkgTHRkMRMwEQYDVQQDDApiYW5rMnUuY29tMR8wHQYJ
KoZIhvcNAQkBFhBhZG1pbkBiYW5rMnUuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOC
AQ8AMIIBCgKCAQEAxaXsnvyznqjjLREGu9RfmD1JDeYLQZERz2Rg4/f+w1J62XTa
t/x5Pa+KY0O+O0DT+y15BreQDGXH1n64Jvi796nlS8MJHylJzXqm5swqHRocfwKZ
C+SgmTsL8GVCcZYXXDd1avlD84TwscTb+VxoC6qHQsbAG5hPBFp72OtTUET6lSWs
ocKewnn4JlfFXhktvJdmUNmN6+YjyXpNiMGmbsi+yl86ZL5f4fXXdbc1SMSOEN7X
Aq/Zmyd3RvwD/9MC6tA33MaRdQXj/vxEv3w10qfm51Rl7EK1DD6PKcBaQvV9IRbp
nEKu1Kw2XNZzvmmcGSWddx0nsvCVHUNatgR6rQIDAQABo1AwTjAdBgNVHQ4EFgQU
YmBXyrCV+mZn0B6rWZY8tWgoyUcwHwYDVR0jBBgwFoAUYmBXyrCV+mZn0B6rWZY8
tWgoyUcwDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAr/DS+EkA9NUj
MFHSMOc5iLIxeXzoU6VBTzU5FsZjA/4cYr26MuTk/l09oBuSY1lTBAVwAItrtUAF
ugLC7pzMTOK80v26spm5XFEhS/QFwgUBo8WMe8EvmDbnoJvBkUGNRjQUHMMN5Qp3
c46vFJuHn65TZp3JUchrQgf7ZDGjGxLRBUCcJF6iChBVbcqxWgEL9WOthAXDFlOG
P42fypzjQyogWYvSq4O5eD6vN9m9iVJHfmJOzKJTNSrDykE0zDQq+iKcfN8CazTr
pXhzs1t64vr7BtTZGYIJw6Lif6k5vMh0rpf7Z5tS6QGO721k5hCTLUOI/4oyxjqF
QUNQb/Tj7g==
-----END CERTIFICATE-----

/etc/ssl/private/apache-selfsigned.key 

-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDFpeye/LOeqOMt
EQa71F+YPUkN5gtBkRHPZGDj9/7DUnrZdNq3/Hk9r4pjQ747QNP7LXkGt5AMZcfW
frgm+Lv3qeVLwwkfKUnNeqbmzCodGhx/ApkL5KCZOwvwZUJxlhdcN3Vq+UPzhPCx
xNv5XGgLqodCxsAbmE8EWnvY61NQRPqVJayhwp7CefgmV8VeGS28l2ZQ2Y3r5iPJ
ek2IwaZuyL7KXzpkvl/h9dd1tzVIxI4Q3tcCr9mbJ3dG/AP/0wLq0DfcxpF1BeP+
/ES/fDXSp+bnVGXsQrUMPo8pwFpC9X0hFumcQq7UrDZc1nO+aZwZJZ13HSey8JUd
Q1q2BHqtAgMBAAECggEAFHcj0yqTZsBSFZ6Htfc9lsPxxpClZbqhv3nDVpedN5hY
xB+HbjmkTDDbAYBIOFZ0HLQOrhVfwwje8mTYqKBkxjY/WeLuFN3vmGk00v0c9zp2
7OfV9RdNUdB9Yfz6Lky+SnwrmlIJKTQAwEeEB4P7+glETDPMPI8+z1KXNFTZoZv0
SH6Vav/Xc18S28rDJwJta6Dgz4l57YOHliiK2QQCY9RkDd1Bz0ycpCcFosH4pOIu
foizD4lRArU4idrXWZ16WcHDiBGHGyFOf9g++/6BlRdOQt3dl7ONU0AlciZ9eERg
Je921irkUmQ0MqjjRwLaSRvR6IhCE76X5FKtKYp2uQKBgQDjQBR5W/6SbZlyEzbq
LnbuOMgWXjsSlXWRY/VDxAa6MaM85HFFztJ7kHgpSvJ5bsUxiQoQRTPVaIDk12Sv
n5PYr0H/Hqij8vYXBpnuTSbBKCxjH1gqA+zv+MHy8cbdEdQ68E4ZIWG+fl7/Qk7I
psKO+dAFAL+0Rsli2YDW6i1cEwKBgQDepx+dS3PUE3FNdHjyDk0MqOtwOXSNVS10
rmYkMUUEiiakvwYJPOAMbbjD56IgBCSBjJ1pZnocCfmE9x8rKdECkzk3irIkQnE4
SpiN9+YIaUK5y+dkhAUADBzWrkgfJ0B6nXI+pmxZ1613be+j2mH3Uae4vc80pf9f
bKHKCBAmPwKBgD+ropDmH4tzPbzieU5ful7Adf8eY7qvOYOE2CEmeSQN6EiVUM9Y
RUzti102bH1tdb6NQM6SNRWj9Akp+EHkmg3p/Lm4I1PcLOsCpHpKD4Oq99TF4XPU
KbyKm/yvlSI3bpkc3yTXX4V57q/iKiS55GUexRPBw/SEqMQTYK/WaOMVAoGBAIoJ
xPDpEYOfFjS2DDHNqfk6VNU72cWx1D+tzAeOQELjP7gN8jkR87ng4JccaYg96UAk
JIdvEC+IA5lq+HjzMPDOw79qjq0qQDVtEg2abpQyZjr4bpoDu3HfEJYMcQxXcoNS
T70FwtEkhRgxIUxNnUUO69P+YZM7gwrvN5Mg0ppTAoGAQhtj+vNAQZrJiaEOybJZ
LRlAoRGgH+qK6g1gnSqUSUvTJsjkYTgQb0mHRYL7pKIF509Bh8fZrobCXvo2dTHt
PUFRX10MuJ6cvXhEATfXBpHS4EFT2EGu7bdMWT2I+oG669huzCMnCzX2roVf8MOy
R9Te1ae0jtKXXgOLKPRt4ro=
-----END PRIVATE KEY-----





server {
        listen 443 ssl;
        server_name 35.197.130.250;

        ssl_certificate           /etc/nginx/cert.crt;
        ssl_certificate_key       /etc/nginx/cert.key;
        ssl_protocols  TLSv1 TLSv1.1 TLSv1.2;
        location ~ {
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_pass https://10.148.0.7:80;
        }
}




























